<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Checkout</title>
</head>
<body>
    <h1>Complete Your Payment</h1>
    <iframe src="https://accept.paymob.com/api/acceptance/iframes/{{ settings.PAYMOB_IFRAME_ID }}?payment_token={{ payment_key }}"
            width="100%" height="500px"></iframe>
    <script>
        setInterval(function() {
            fetch('/orders/api/order-status/{{ order.id }}/')
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'paid') {
                        window.location.href = '/orders/success/';
                    }
                });
        }, 5000);
    </script>
</body>
</html> 